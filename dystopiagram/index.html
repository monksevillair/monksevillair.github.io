<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dystopian Social Feed</title>
    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <style>
        /* Base styles */
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .container { max-width: 600px; margin: 0 auto; padding: 16px; }
        .post { background: white; border: 1px solid #ddd; margin-bottom: 24px; border-radius: 8px; }
        .header { padding: 12px; border-bottom: 1px solid #ddd; display: flex; align-items: center; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; background: #eee; }
        .username { margin-left: 12px; font-weight: 600; }
        .content { aspect-ratio: 1; }
        .actions { padding: 12px; display: flex; justify-content: space-between; }
        .action-btn { background: none; border: none; cursor: pointer; padding: 8px; }
        .action-btn.active { color: #ff4444; }
        .comments { padding: 12px; }
        .comment { margin-bottom: 8px; }
        .feed { background: #f0f2f5; min-height: 100vh; padding: 16px 0; }
        .loading { text-align: center; padding: 16px; color: #666; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect, useCallback, useRef } = React;
        const { createRoot } = ReactDOM;

        const messages = [
            'OBEY', 'CONSUME', 'CONFORM', 'SUBMIT', 'WATCH TV', 'BUY',
            'NO INDEPENDENT THOUGHT', 'STAY ASLEEP', 'THIS IS YOUR GOD'
        ];

        const generateSVG = (message) => {
            const dark = Math.random() > 0.5;
            return React.createElement('svg', {
                viewBox: '0 0 400 400',
                style: { width: '100%', height: '100%' }
            }, [
                React.createElement('rect', {
                    key: 'bg',
                    width: 400,
                    height: 400,
                    fill: dark ? 'black' : 'white'
                }),
                React.createElement('text', {
                    key: 'text',
                    x: 200,
                    y: 200,
                    textAnchor: 'middle',
                    dominantBaseline: 'middle',
                    fill: dark ? 'white' : 'black',
                    fontSize: 48,
                    fontWeight: 'bold',
                    fontFamily: 'Impact'
                }, message)
            ]);
        };

        function Post({ message }) {
            const [liked, setLiked] = useState(false);
            const [showComments, setShowComments] = useState(false);

            return React.createElement('div', { className: 'post' }, [
                React.createElement('div', { key: 'header', className: 'header' }, [
                    React.createElement('div', { key: 'avatar', className: 'avatar' }),
                    React.createElement('span', { key: 'username', className: 'username' }, 
                        'citizen' + Math.floor(Math.random() * 10000)
                    )
                ]),
                React.createElement('div', { key: 'content', className: 'content' },
                    generateSVG(message)
                ),
                React.createElement('div', { key: 'actions', className: 'actions' }, [
                    React.createElement('button', {
                        key: 'like',
                        className: `action-btn ${liked ? 'active' : ''}`,
                        onClick: () => setLiked(!liked)
                    }, '❤️'),
                    React.createElement('button', {
                        key: 'comment',
                        className: 'action-btn',
                        onClick: () => setShowComments(!showComments)
                    }, '💬')
                ]),
                showComments && React.createElement('div', { key: 'comments', className: 'comments' }, [
                    React.createElement('div', { key: 'c1', className: 'comment' }, 'Compliance is happiness'),
                    React.createElement('div', { key: 'c2', className: 'comment' }, 'I love following orders')
                ])
            ]);
        }

        function Feed() {
            const [posts, setPosts] = useState([]);
            const [loading, setLoading] = useState(false);
            const loadingRef = useRef(null);

            const generatePost = useCallback(() => ({
                id: Math.random().toString(36).substr(2),
                message: messages[Math.floor(Math.random() * messages.length)]
            }), []);

            const loadMore = useCallback(() => {
                if (!loading) {
                    setLoading(true);
                    setTimeout(() => {
                        setPosts(p => [...p, ...Array(5).fill().map(generatePost)]);
                        setLoading(false);
                    }, 500);
                }
            }, [loading, generatePost]);

            useEffect(() => {
                setPosts(Array(10).fill().map(generatePost));

                const observer = new IntersectionObserver(
                    entries => entries[0].isIntersecting && loadMore(),
                    { rootMargin: '100px' }
                );

                if (loadingRef.current) {
                    observer.observe(loadingRef.current);
                }

                return () => observer.disconnect();
            }, [loadMore]);

            return React.createElement('div', { className: 'feed' }, [
                React.createElement('div', { key: 'container', className: 'container' }, [
                    ...posts.map(post => 
                        React.createElement(Post, { key: post.id, message: post.message })
                    ),
                    React.createElement('div', {
                        key: 'loading',
                        ref: loadingRef,
                        className: 'loading'
                    }, loading ? 'Loading more propaganda...' : 'Scroll for more compliance')
                ])
            ]);
        }

        // Wait for React to load
        window.onload = () => {
            if (React && ReactDOM) {
                const root = createRoot(document.getElementById('root'));
                root.render(React.createElement(Feed));
            }
        };
    </script>
</body>
</html>
